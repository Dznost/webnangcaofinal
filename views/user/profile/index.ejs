<section class="profile-section">
    <div class="container">
        <h1>üë§ H·ªì S∆° C√° Nh√¢n</h1>
        
        <div class="profile-content">
            <div class="profile-info">
                <h2>Th√¥ng Tin T√†i Kho·∫£n</h2>
                <p><strong>üë§ T√™n:</strong> <%= user.name %></p>
                <p><strong>üìß Email:</strong> <%= user.email %></p>
                <p><strong>üìÖ Ng√†y T·∫°o:</strong> <%= new Date(user.createdAt).toLocaleDateString('vi-VN') %></p>
            </div>

            <div class="reservations">
                <h2>üìÖ ƒê·∫∑t B√†n</h2>
                <% if (reservations && reservations.length > 0) { %>
                    <table class="cart-table">
                        <tr>
                            <th>Chi Nh√°nh</th>
                            <th>Ng√†y</th>
                            <th>Gi·ªù</th>
                            <th>S·ªë Kh√°ch</th>
                            <th>Tr·∫°ng Th√°i</th>
                        </tr>
                        <% reservations.forEach(res => { %>
                            <tr>
                                <td><%= res.branchId ? res.branchId.name : 'N/A' %></td>
                                <td><%= new Date(res.date).toLocaleDateString('vi-VN') %></td>
                                <td><%= res.time %></td>
                                <td><%= res.guests %></td>
                                <td><span class="status-badge"><%= res.status %></span></td>
                            </tr>
                        <% }); %>
                    </table>
                <% } else { %>
                    <p>Ch∆∞a c√≥ ƒë·∫∑t b√†n n√†o</p>
                    <a href="/user/reservation" class="btn btn-primary">ƒê·∫∑t B√†n Ngay</a>
                <% } %>
            </div>

            <div class="orders">
                <h2>üì¶ ƒê∆°n H√†ng</h2>
                <% if (orders && orders.length > 0) { %>
                    <table class="cart-table">
                        <tr>
                            <th>M√£ ƒê∆°n</th>
                            <th>T·ªïng Ti·ªÅn</th>
                            <th>Tr·∫°ng Th√°i</th>
                            <th>Ng√†y</th>
                        </tr>
                        <% orders.forEach(order => { %>
                            <tr>
                                <td><%= order._id.toString().substring(0, 8) %>...</td>
                                <td><%= order.totalPrice.toLocaleString('vi-VN') %>ƒë</td>
                                <td><span class="status-badge"><%= order.status %></span></td>
                                <td><%= new Date(order.createdAt).toLocaleDateString('vi-VN') %></td>
                            </tr>
                        <% }); %>
                    </table>
                <% } else { %>
                    <p>Ch∆∞a c√≥ ƒë∆°n h√†ng n√†o</p>
                    <a href="/menu" class="btn btn-primary">ƒê·∫∑t H√†ng Ngay</a>
                <% } %>
            </div>
        </div>
    </div>
</section>
