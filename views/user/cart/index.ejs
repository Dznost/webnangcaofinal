<section class="cart-section">
    <div class="container">
        <h1>üõí Gi·ªè H√†ng</h1>
        <% if (cart && cart.length > 0) { %>
            <table class="cart-table">
                <tr>
                    <th>T√™n M√≥n</th>
                    <th>Gi√°</th>
                    <th>S·ªë L∆∞·ª£ng</th>
                    <th>T·ªïng</th>
                    <th>H√†nh ƒê·ªông</th>
                </tr>
                <% let total = 0; %>
                <% cart.forEach(item => { %>
                    <% const itemTotal = item.price * item.quantity; %>
                    <% total += itemTotal; %>
                    <tr>
                        <td><%= item.name %></td>
                        <td><%= item.price.toLocaleString('vi-VN') %>ƒë</td>
                        <td><%= item.quantity %></td>
                        <td><%= itemTotal.toLocaleString('vi-VN') %>ƒë</td>
                        <!-- Changed from item._id to item.dishId for cart remove -->
                        <td><a href="/user/cart/remove/<%= item.dishId %>" class="btn btn-small btn-danger">X√≥a</a></td>
                    </tr>
                <% }); %>
            </table>
            <div class="cart-total">
                <h3>üí∞ T·ªïng C·ªông: <%= total.toLocaleString('vi-VN') %>ƒë</h3>
                <a href="/user/checkout" class="btn btn-primary">Ti·∫øn H√†nh Thanh To√°n</a>
                <a href="/menu" class="btn">Ti·∫øp T·ª•c Mua S·∫Øm</a>
            </div>
        <% } else { %>
            <div class="empty-cart">
                <p>üõí Gi·ªè h√†ng tr·ªëng</p>
                <a href="/menu" class="btn btn-primary">Ti·∫øp T·ª•c Mua S·∫Øm</a>
            </div>
        <% } %>
    </div>
</section>
